<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        x:Class="SoDotCash.Views.MainWindow"
        mc:Ignorable="d"
        Title="So.Cash" Height="350" Width="800"
        DataContext="{Binding Main, Source={StaticResource Locator}}" 
        >

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="5*"/>
            <RowDefinition Height="1.5*" />
        </Grid.RowDefinitions>

        <Label VerticalAlignment="Center" HorizontalAlignment="Center" Content="{Binding TestString}" />

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="4*" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="25"/>
                    <RowDefinition />
                </Grid.RowDefinitions>

                <Label Content="Accounts" HorizontalAlignment="Center" />

                <TreeView Grid.Row="1" Margin="10" ItemsSource="{Binding AccountsView}" SelectedItemChanged="TreeView_OnSelectedItemChanged">
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Value }">
                            <TextBlock Text="{Binding Key}" />
                            <HierarchicalDataTemplate.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding AccountId}"></TextBlock>
                                </DataTemplate>
                            </HierarchicalDataTemplate.ItemTemplate>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

            </Grid>

            <ListView Grid.Column="1" Margin="10" ItemsSource="{Binding Statements[0].Transactions}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Date" DisplayMemberBinding="{Binding PostDate, StringFormat={}{0:dd/MMM/yyy-hh:mm:ss tt}}" />
                        <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" />
                        <GridViewColumn Header="Amount" DisplayMemberBinding="{Binding LocalizedAmount, StringFormat={}{0:C2}}" >
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <!--<DataTrigger Binding="{Binding Amount}"Value=""></DataTrigger>-->
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Transaction ID" DisplayMemberBinding="{Binding TransactionId}" />
                    </GridView>
                </ListView.View>
            </ListView>
            
        </Grid>
        <UniformGrid Grid.Row="2" Columns="5">
            <TextBlock/>
            <TextBlock/>
            <TextBlock/>
            <TextBlock/>
            <Button Margin="10" Content="LoadTransactions" 
                    Command="{Binding LoadTransactionsRelay}" 
                    IsEnabled="{Binding RetrievingTransactions, Converter={StaticResource BoolToInverseBoolConverter}}" />
        </UniformGrid>
    </Grid>
</Window>
